<Page
    x:Class="TiketsApp.Views.UserViews.PriviewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:TiketsApp.Views.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:TiketsApp.Views.UserViews"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pu="https://opensource.panuon.com/wpf-ui"
    xmlns:usersvm="clr-namespace:TiketsApp.ViewModels.UsersVm" xmlns:Models="clr-namespace:TiketsApp.Models" d:DataContext="{d:DesignInstance Type=usersvm:PriviewVM}"
    Title="PriviewPage"
    Style="{StaticResource BaseFluentPageStyle}"
    mc:Ignorable="d">
    <Page.Resources>
        <converters:BoolToVisibleConverter x:Key="BoolToVisibleConverter" />
        <converters:InverseBoolToVisibleConverter x:Key="InverseBoolToVisibleConverter" />
    </Page.Resources>
    <Border Margin="3" Style="{StaticResource FluentCardBorderStyle}">
        <Grid>

            <Grid Visibility="{Binding DataLoaded, Converter={StaticResource BoolToVisibleConverter}}">


                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="920"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Background="Aqua" Margin="5" Grid.Column="1">
                    <pu:Carousel Height="500" Margin="20, 0, 20, 20" ItemsSource="{Binding Event.Emages}">
                        <pu:Carousel.ItemTemplate>
                            <DataTemplate DataType="{x:Type Models:Image}">
                                <Image Stretch="Fill" Source="{Binding Path}"/>
                            </DataTemplate>
                        </pu:Carousel.ItemTemplate>
                    </pu:Carousel>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50*"/>
                            <ColumnDefinition Width="50*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Margin="20, 0, 20, 0" Grid.Column="0">
                            <TextBlock Text="{Binding Event.Name}" Style="{StaticResource TitleTextBlockStyle}"/>
                            <TextBlock Margin="0, 10, 0, 0" Text="{Binding Event.Description}"/>
                            
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Grid>




            <Grid Visibility="{Binding DataLoaded, Converter={StaticResource InverseBoolToVisibleConverter}}">

                <Ellipse
                    Width="60"
                    Height="60"
                    Stroke="#E0E0E0"
                    StrokeThickness="4" />


                <Ellipse
                    Width="60"
                    Height="60"
                    RenderTransformOrigin="0.5,0.5"
                    Stroke="{DynamicResource AccentTextFillColorTertiaryBrush}"
                    StrokeDashArray="0.1 1.9"
                    StrokeDashCap="Round"
                    StrokeThickness="4">
                    <Ellipse.RenderTransform>
                        <RotateTransform Angle="0" />
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation
                                        Storyboard.TargetProperty="(Ellipse.RenderTransform).(RotateTransform.Angle)"
                                        From="0"
                                        To="360"
                                        Duration="0:0:1.5" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
            </Grid>
        </Grid>
    </Border>
</Page>
